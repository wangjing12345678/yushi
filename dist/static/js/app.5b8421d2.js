(function(t){function e(e){for(var i,r,c=e[0],o=e[1],l=e[2],u=0,p=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,c=1;c<a.length;c++){var o=a[c];0!==s[o]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},s={app:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=o;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"097e":function(t,e){(function(t,e){var a=t.documentElement,i="orientationchange"in window?"orientationchange":"resize",s=function(){var t=a.clientWidth;t&&(a.style.fontSize=t>=750?"100px":t/750*100+"px")};t.addEventListener&&(e.addEventListener(i,s,!1),t.addEventListener("DOMContentLoaded",s,!1))})(document,window)},"0c39":function(t,e,a){"use strict";a("c2ea")},"1d44":function(t,e,a){},"249f":function(t,e,a){"use strict";a("6fa2")},"2c18":function(t,e,a){t.exports=a.p+"static/img/home_17.35ec524c.jpg"},"3adf":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("a026"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("pageWrap")],1)},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("swiper",{ref:"mySwiper",staticClass:"swiper",attrs:{options:t.swiperOption},on:{slideChangeTransitionStart:t.slideChangeTransitionStart,slideChange:t.slideChange}},[i("swiper-slide",[i("div",{class:0==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("2c18"),alt:""}})]),i("audio",{ref:"audio",attrs:{src:"https://res.qiaomukeji.com/h5pro/202110/ljbgm/bgm_21.mp3",id:"audio",preload:"auto",autoplay:"autoplay"}})]),i("swiper-slide",[i("div",{class:1==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("dcc1"),alt:""}})])]),i("swiper-slide",[i("div",{class:2==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("8bb9"),alt:""}})])]),i("swiper-slide",[i("div",{class:2==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("8bb9"),alt:""}})])]),i("swiper-slide",[i("div",{class:1==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("dcc1"),alt:""}})])]),i("swiper-slide",[i("div",{class:2==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("8bb9"),alt:""}})])]),i("swiper-slide",[i("div",{class:1==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("dcc1"),alt:""}})])]),i("swiper-slide",[i("div",{class:2==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("8bb9"),alt:""}})])]),i("swiper-slide",[i("div",{class:1==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("dcc1"),alt:""}})])]),i("swiper-slide",[i("div",{class:2==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("8bb9"),alt:""}})])]),i("swiper-slide",[i("div",{class:1==t.activeIndex?"img-wrap animate__animated animate__pulse":"img-wrap"},[i("img",{staticClass:"back",attrs:{src:a("dcc1"),alt:""}})])]),i("swiper-slide",[i("div",{staticClass:"img-wrap",staticStyle:{background:"white"}}),i("div",{staticClass:"uploadPage"},[i("getPoster",{ref:"getPoster",on:{changeDate:t.changeDate,startPoster:t.startPoster}})],1)]),i("div",{staticClass:"year-scroll"},[i("yearsScroll",{ref:"yearsScroll",on:{changePage:t.changePage}})],1),i("div",{staticClass:"swiper-button-prev swiper-button-white",attrs:{slot:"button-prev"},slot:"button-prev"}),i("div",{staticClass:"swiper-button-next swiper-button-white",attrs:{slot:"button-next"},slot:"button-next"})],1),i("van-calendar",{attrs:{"min-date":new Date("2011-10-10")},on:{confirm:t.onConfirm},model:{value:t.pickerVisible,callback:function(e){t.pickerVisible=e},expression:"pickerVisible"}}),t.showPoster?i("div",{staticClass:"poster-wrap"},[i("van-overlay",{attrs:{show:t.showPoster}},[i("van-icon",{staticClass:"closeWrap",attrs:{name:"close"},on:{click:function(e){t.showPoster=!1}}}),i("poster",{ref:"posterMain",attrs:{tempObj:t.tempObj}})],1)],1):t._e()],1)},c=[],o=(a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-year"},[a("div",{staticClass:"ka"}),a("div",{staticClass:"nav"},[a("div",{staticClass:"nav-title box-start",style:{top:t.styleTop+"px"}},t._l(t.year,(function(e,i){return a("div",{key:i,staticClass:"nav-item",on:{click:function(e){return t.action(i)}}},[a("span",{staticClass:"item-word"},[t._v(t._s(e))])])})),0)])])}),l=[],d={name:"years",components:{},data:function(){return{styleTop:"",year:["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"]}},methods:{action:function(t){this.styleTop=-98*t+98,this.$emit("changePage",t)}}},u=d,p=(a("9e83"),a("2877")),m=Object(p["a"])(u,o,l,!1,null,"3a18414f",null),f=m.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"poster-in"},[a("div",{ref:"imgContainer",attrs:{id:"imgContainer"}},[a("div",{staticClass:"imgContainer-title"},[t._v("宇视十周年生日快乐")]),a("div",{staticClass:"imgContainer-title"},[t._v("十年有你，少年依旧")]),a("img",{staticClass:"imgContainer-img",attrs:{src:t.imgObj.imgSrc,alt:""}}),a("div",{staticClass:"miss-word"},[a("div",[t._v("认识宇视 "+t._s(t.imgObj.days)+"天")]),a("div",[t._v("宇视十周年 生日快乐")]),a("div",{staticClass:"miss-name"},[t._v(t._s(t.imgObj.name))])])]),a("div",{staticClass:"get-btn"},[t._v("长安保存")]),t.imgObj.imgUrl?a("div",{staticClass:"result"},[a("img",{staticStyle:{opacity:"0"},attrs:{src:t.imgObj.imgUrl,alt:""}})]):t._e()])},v=[],h=a("c0e9"),b=a.n(h),w={name:"poster",props:["tempObj"],data:function(){return{imgObj:this.tempObj}},methods:{getResult:function(){var t=this;b()(this.$refs.imgContainer,{taintTest:!1,allowTaint:!1,scale:window.devicePixelRatio,useCORS:!0}).then((function(e){console.log(e,"canvas");var a=e.toDataURL("image/png",1);t.imgObj.imgUrl=a}))}}},_=w,y=(a("249f"),Object(p["a"])(_,g,v,!1,null,"6d0b315a",null)),C=y.exports,x=a("7212"),k=(a("dfa4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-page"},[i("div",{attrs:{id:"handlePage"}},[i("div",{staticClass:"handlePage-title"},[t._v("宇视十周年生日快乐")]),i("div",[i("van-field",{attrs:{label:"姓名",placeholder:"请输入姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("van-field",{attrs:{label:"相识日期",placeholder:"请选择相识日期",readonly:""},on:{click:t.changDate},model:{value:t.missDate,callback:function(e){t.missDate=e},expression:"missDate"}})],1),i("div",{staticClass:"chooseImg"},[t.imgSrc?i("img",{attrs:{src:t.imgSrc,alt:""}}):i("img",{attrs:{src:a("9149"),alt:""},on:{click:t.selectImage}})]),i("div",{staticClass:"get-btn",on:{click:t.getCanvas}},[t._v("点击生成")])])])}),O=[],j=(a("b0c0"),{name:"getPoster",data:function(){return{name:"",imgSrc:"",imgUrl:"",missDate:"",pickerVisible:!1}},mounted:function(){},methods:{changeImg:function(t){var e=this,a=t.target.files[0];if(t&&window.FileReader){var i=new FileReader;i.readAsDataURL(a),i.onloadend=function(){e.imgSrc=this.result,e.textHide=!1}}},getCanvas:function(){console.log(this.name),console.log(this.missDate);var t=new Date(this.missDate),e=new Date,a={imgUrl:"",name:this.name,imgSrc:this.imgSrc,days:Math.floor((e-t)/864e5)};this.$emit("startPoster",a)},changDate:function(){this.$emit("changeDate")},selectImage:function(){var t=document.getElementById("fileInput");t&&(t.parentNode.removeChild(t),t=null),null==t&&(t=document.createElement("input"),t.id="fileInput",t.type="file",t.accept="image/*",t.style.height="0px",t.style.display="block",t.style.overflow="hidden",document.body.insertBefore(t,document.body.firstChild),t.addEventListener("change",this.selectFileImage,!1)),setTimeout((function(){t.click()}),100)},selectFileImage:function(t){var e=this,a=t.target.files[0];if(t&&window.FileReader){var i=new FileReader;i.readAsDataURL(a),i.onloadend=function(){e.imgSrc=this.result,e.textHide=!1}}}}}),S=j,P=(a("afbc"),a("0c39"),Object(p["a"])(S,k,O,!1,null,"25ce0906",null)),I=P.exports,D={name:"page",components:{swiper:x["swiper"],swiperSlide:x["swiperSlide"],getPoster:I,poster:C,yearsScroll:f},data:function(){return{showPoster:!1,tempObj:"",activeIndex:"",pickerVisible:!1,swiperOption:{direction:"vertical",speed:300,effect:"fade",pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}},mounted:function(){var t=this;this.$nextTick((function(){t.audioAutoPlay("audio")}))},methods:{slideChangeTransitionStart:function(){this.activeIndex=this.$refs.mySwiper.swiper.activeIndex},slideChange:function(){this.activeIndex=this.$refs.mySwiper.swiper.activeIndex,this.$refs.yearsScroll.action(this.activeIndex)},clickbtn:function(){this.$refs.audio.play()},audioAutoPlay:function(t){var e=document.getElementById(t);document.addEventListener("WeixinJSBridgeReady",(function(){e.play()}),!1),document.addEventListener("YixinJSBridgeReady",(function(){e.play()}),!1)},changeDate:function(){this.pickerVisible=!0},formatDate:function(t){return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())},onConfirm:function(t){this.pickerVisible=!1,this.$refs.getPoster.missDate=this.formatDate(t)},startPoster:function(t){var e=this;this.tempObj=t,this.showPoster=!0,this.$nextTick((function(){e.$refs.posterMain.getResult()}))},changePage:function(t){this.activeIndex=t,this.$refs.mySwiper.swiper.slideTo(t,50,!1)}}},$=D,E=(a("b5e2"),Object(p["a"])($,r,c,!1,null,"072fd469",null)),T=E.exports,R={name:"App",components:{pageWrap:T}},L=R,M=(a("034f"),Object(p["a"])(L,s,n,!1,null,null,null)),U=M.exports,F=(a("097e"),a("77ed")),V=a.n(F),A=a("b650"),B=(a("157a"),a("473d")),W=a("ee83"),J=a("6e47"),z=a("565f"),H=a("ad06");i["a"].use(V.a),i["a"].use(A["a"]),i["a"].use(B["a"]),i["a"].use(W["a"]),i["a"].use(J["a"]),i["a"].use(z["a"]),i["a"].use(H["a"]),i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(U)}}).$mount("#app")},"6fa2":function(t,e,a){},8e3:function(t,e,a){},"85ec":function(t,e,a){},"8bb9":function(t,e,a){t.exports=a.p+"static/img/home_21.2cf2f3b4.jpg"},9149:function(t,e,a){t.exports=a.p+"static/img/camera.d68486e0.png"},"9e83":function(t,e,a){"use strict";a("8000")},afbc:function(t,e,a){"use strict";a("3adf")},b5e2:function(t,e,a){"use strict";a("1d44")},c2ea:function(t,e,a){},dcc1:function(t,e,a){t.exports=a.p+"static/img/home_19.680684d2.jpg"}});
//# sourceMappingURL=app.5b8421d2.js.map